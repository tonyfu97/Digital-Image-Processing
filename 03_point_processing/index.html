<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Tony Fu" /><link rel="canonical" href="https://tonyfu97.github.io/Digital-Image-Processing/03_point_processing/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>3. Point Processing Transformations - Digital Image Processing Notes</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "3. Point Processing Transformations";
        var mkdocs_page_input_path = "03_point_processing.md";
        var mkdocs_page_url = "/Digital-Image-Processing/03_point_processing/";
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/django.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-274394082"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-274394082');
      </script>
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Digital Image Processing Notes
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../01_getting_started/">1. Getting Started</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../02_block_decomposition/">2. Block Decomposition</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">3. Point Processing Transformations</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#1-mathematical-transformations">1. Mathematical Transformations</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#10-orignal-image">1.0. Orignal Image</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#11-exponential-transformations">1.1. Exponential Transformations</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#12-square-root-transformations">1.2. Square Root Transformations</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#13-logarithmic-transformations">1.3. Logarithmic Transformations</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#14-cube-transformations">1.4 Cube Transformations</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#2-bitwise-transformations">2. Bitwise Transformations</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#20-orignal-images">2.0. Orignal Images</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#21-bitwise-and">2.1. Bitwise AND</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#22-bitwise-or">2.2. Bitwise OR</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#23-bitwise-xor">2.3. Bitwise XOR</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#3-histogram-equalization">3. Histogram Equalization</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#30-orignal-image">3.0. Orignal Image</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#31-histogram-equalization">3.1. Histogram Equalization</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../04_morphology/">4. Morphology</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../05_filtering/">5. Filtering</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../06_feature_extraction/">6. Feature Extraction</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../07_segmentation/">7. Segmentation</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../appendix_1/">Appendix 1 - Math Expressions in CImg's Fill Method</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../where_did_i_get_my_images/">Where Did I Get My Images?</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Digital Image Processing Notes</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
      <li>3. Point Processing Transformations</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/tonyfu97/Digital-Image-Processing/blob/master/docs/03_point_processing.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="point-processing-transformations-learning-reflection">Point Processing Transformations - Learning Reflection</h1>
<p><strong>Author</strong>: Tony Fu<br />
<strong>Date</strong>: August 19, 2023<br />
<strong>Device</strong>: MacBook Pro 16-inch, Late 2021 (M1 Pro)<br />
<strong>Code</strong>: <a href="https://github.com/tonyfu97/Digital-Image-Processing/tree/main/03_point_processing">GitHub</a><br />
<strong>Reference</strong>: Chapter 3 <a href="https://www.amazon.com/Digital-Image-Processing-Implementing-Algorithms/dp/1032347538"><em>Digital Image Processing with C++: Implementing Reference Algorithms with the CImg Library</em> by Tschumperl√©, Tilmant, Barra</a></p>
<h2 id="1-mathematical-transformations">1. Mathematical Transformations</h2>
<h3 id="10-orignal-image">1.0. Orignal Image</h3>
<p><img alt="original" src="../results/03/lighthouse_original.png" /></p>
<h3 id="11-exponential-transformations">1.1. Exponential Transformations</h3>
<pre><code class="language-cpp">CImg&lt;&gt; expImg = lum.get_exp()/50;
</code></pre>
<p><img alt="exponential" src="../results/03/lighthouse_exp.png" /></p>
<h3 id="12-square-root-transformations">1.2. Square Root Transformations</h3>
<pre><code class="language-cpp">CImg&lt;&gt; sqrtImg = lum.get_sqrt()*10;
</code></pre>
<p><img alt="sqrt" src="../results/03/lighthouse_sqrt.png" /></p>
<h3 id="13-logarithmic-transformations">1.3. Logarithmic Transformations</h3>
<pre><code class="language-cpp">CImg&lt;&gt; logImg = (2 + lum.get_abs()).log();
</code></pre>
<p><img alt="log" src="../results/03/lighthouse_log.png" /></p>
<h3 id="14-cube-transformations">1.4 Cube Transformations</h3>
<pre><code class="language-cpp">CImg&lt;&gt; cubeImg = lum.get_pow(3);
</code></pre>
<p><img alt="cube" src="../results/03/lighthouse_cube.png" /></p>
<h2 id="2-bitwise-transformations">2. Bitwise Transformations</h2>
<h3 id="20-orignal-images">2.0. Orignal Images</h3>
<p><img alt="img1" src="../results/03/img1.png" />
<img alt="img2" src="../results/03/img2.png" /></p>
<h3 id="21-bitwise-and">2.1. Bitwise AND</h3>
<pre><code class="language-cpp">CImg&lt;unsigned char&gt; img_and = img1 &amp; img2;
</code></pre>
<p><img alt="and" src="../results/03/and_image.png" /></p>
<p>If you have two 8-bit pixels, one with the value 0101 (5 in decimal) and the other with 1010 (10 in decimal), then the bitwise AND operation between these two pixels would give you 0000 (0 in decimal).</p>
<h3 id="22-bitwise-or">2.2. Bitwise OR</h3>
<pre><code class="language-cpp">CImg&lt;unsigned char&gt; img_or = img1 | img2;
</code></pre>
<p><img alt="or" src="../results/03/or_image.png" /></p>
<h3 id="23-bitwise-xor">2.3. Bitwise XOR</h3>
<pre><code class="language-cpp">CImg&lt;unsigned char&gt; img_xor = img1 ^ img2;
</code></pre>
<p><img alt="xor" src="../results/03/xor_image.png" /></p>
<p>As we seen in the above example, bitwise operations might seem somewhat abstract when applied to images (5 &amp; 10 = 0. What?), but they are actually quite useful in in specific contexts:</p>
<ul>
<li><strong>Masking</strong>: If you have a binary mask where certain pixels are set to 1 and others are set to 0, you can use the bitwise AND operation with an image to "mask" or isolate those areas. </li>
<li><strong>Steganography or Watermarking</strong>: Bitwise operations might be used to embed or extract information within an image. By operating at the bit level, you can hide data within the least significant bits of an image in a way that's almost visually imperceptible. Refer to Code 3.3 in the book for an example.</li>
<li><strong>Thresholding</strong>: If you have two binary images representing different thresholded features, the bitwise AND can be used to find the overlapping areas between those features.</li>
</ul>
<h2 id="3-histogram-equalization">3. Histogram Equalization</h2>
<h3 id="30-orignal-image">3.0. Orignal Image</h3>
<p><img alt="original" src="../results/03/lighthouse_cube.png" /></p>
<p>And the corresponding histogram:
<img alt="hist_original" src="../results/03/hist_original.png" /></p>
<h3 id="31-histogram-equalization">3.1. Histogram Equalization</h3>
<pre><code class="language-cpp">CImg&lt;&gt; equalizeHisto(CImg&lt;&gt; &amp;imgIn, unsigned int nb)
{
    CImg&lt;&gt; imgOut(imgIn);                   // Create a copy of the input image for the output
    float vmin, vmax = imgIn.max_min(vmin); // Find the minimum and maximum pixel values
    int size = imgIn.size();                // Get the total number of pixels in the image
    int vdiff = vmax - vmin;                // Compute the difference between max and min values

    CImg&lt;&gt; hist = imgIn.get_histogram(nb, vmin, vmax); // Calculate the histogram with nb bins
    long int cumul = 0;

    // Compute the cumulative histogram
    cimg_forX(hist, pos)
    {
        cumul += hist[pos];
        hist[pos] = cumul;
    }

    if (cumul == 0) // Check for a special case where the image has no non-zero pixels
        cumul = 1;  // Avoid division by zero later in the code

    // Equalize the image by adjusting pixel values according to the cumulative histogram
    cimg_foroff(imgIn, off) // Iterate through all offsets (positions) in the input image
    {
        int pos = (int)((imgIn[off] - vmin) * (nb - 1) / vdiff);
        if (pos &gt;= 0 &amp;&amp; pos &lt; (int)nb)
            imgOut[off] = vmin + vdiff * hist[pos] / size;
    }

    return imgOut;
}
</code></pre>
<p>In the example code above, <code>cimg_foroff</code> is a macro provided by the CImg library that creates a loop to iterate over all the pixels in the image. Inside this loop, we first calculate the position of the pixel in the histogram (<code>pos</code>).</p>
<p>
<script type="math/tex; mode=display">
\text{{pos}} = \left\lfloor \frac{{(I_{\text{{off}}} - \text{{vmin}}) \cdot (\text{{nb}} - 1)}}{{\text{{vdiff}}}} \right\rfloor
</script>
</p>
<p>where <script type="math/tex">I_{\text{{off}}}</script> is the intensity of the pixel at offset <code>off</code>, <script type="math/tex">\text{{vmin}}</script> and <script type="math/tex">\text{{vmax}}</script> are the minimum and maximum intensity values in the image, <script type="math/tex">\text{{vdiff}} = \text{{vmax}} - \text{{vmin}}</script>, and <script type="math/tex">\text{{nb}}</script> is the number of bins in the histogram.</p>
<p>Then, we check if the position is within the valid range of the histogram:
<script type="math/tex; mode=display">
\text{if } \text{{pos}} \geq 0 \text{ and } \text{{pos}} < \text{{nb}}
</script>
</p>
<p>If so, we calculate the new pixel value using the following expression:</p>
<p>
<script type="math/tex; mode=display">
I_{\text{{out, off}}} = \text{{vmin}} + \frac{{\text{{vdiff}} \cdot H_{\text{{pos}}}}}{{\text{{size}}}}
</script>
</p>
<p>where <script type="math/tex">I_{\text{{out, off}}}</script> is the new intensity value at offset <code>off</code>, <script type="math/tex">H_{\text{{pos}}}</script> is the value at the <code>pos</code> position in the cumulative histogram, and <script type="math/tex">\text{{size}}</script> is the total number of pixels in the image.</p>
<p><img alt="equalized" src="../results/03/lighthouse_cube_equalized.png" /></p>
<p>And the corresponding histogram:
<img alt="hist_equalized" src="../results/03/hist_equalized.png" /></p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../02_block_decomposition/" class="btn btn-neutral float-left" title="2. Block Decomposition"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../04_morphology/" class="btn btn-neutral float-right" title="4. Morphology">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p>Copyright &copy; 2023 Tony Fu</p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/tonyfu97/Digital-Image-Processing" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../02_block_decomposition/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../04_morphology/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
